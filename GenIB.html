<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Emoji â†’ Character Prompt Builder (Non-Humanoid)</title>
<meta name="color-scheme" content="light dark" />
<style>
  :root {
    --bg: Canvas; --fg: CanvasText; --muted: color-mix(in lch, var(--fg) 50%, transparent);
    --accent: #5a7cff; --gap: 12px; --radius: 12px; --ring: 2px solid color-mix(in lch, var(--accent) 70%, white 30%);
  }
  * { box-sizing: border-box }
  html, body { height: 100%; }
  body {
    margin: 0; font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color: var(--fg); background: var(--bg);
    min-height: 100dvh; padding: env(safe-area-inset-top) env(safe-area-inset-right)
                         calc(16px + env(safe-area-inset-bottom)) env(safe-area-inset-left);
    display: grid; grid-template-rows: auto 1fr auto; gap: var(--gap);
  }
  header, footer { padding: 12px 16px; }
  header h1 { margin: 0 0 4px 0; font-weight: 650; font-size: 1.05rem; }
  header p { margin: 0; color: var(--muted); font-size: .92rem; }
  .grid {
    display: grid; gap: var(--gap);
    grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
    padding: 0 16px;
  }
  .card {
    border: 1px solid color-mix(in lch, var(--fg) 12%, transparent);
    border-radius: var(--radius);
    padding: 12px; display: grid; gap: 8px; align-content: start;
    background: color-mix(in lch, var(--bg) 96%, var(--fg) 4%);
    cursor: pointer; position: relative;
  }
  .card:focus-visible { outline: none; box-shadow: 0 0 0 3px color-mix(in lch, var(--accent) 40%, transparent); }
  .emojis { font-size: 1.65rem; line-height: 1; }
  .title { font-weight: 650; }
  .meta { color: var(--muted); font-size: .85rem; }
  .out {
    padding: 12px 16px; display: grid; gap: 8px;
    border-top: 1px solid color-mix(in lch, var(--fg) 12%, transparent);
  }
  textarea {
    width: 100%; min-height: 9lh; resize: vertical; font: 14px/1.4 ui-monospace, SFMono-Regular, Menlo, monospace;
    border-radius: 10px; padding: 10px; border: 1px solid color-mix(in lch, var(--fg) 18%, transparent);
    background: color-mix(in lch, var(--bg) 96%, var(--fg) 4%);
  }
  .toolbar {
    display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
    border-top: 1px dashed color-mix(in lch, var(--fg) 15%, transparent); padding-top: 8px; margin-top: 2px;
  }
  .btn {
    appearance: none; border: 1px solid color-mix(in lch, var(--fg) 18%, transparent);
    background: color-mix(in lch, var(--bg) 90%, var(--fg) 10%);
    padding: 8px 12px; border-radius: 999px; font-weight: 600; cursor: pointer;
  }
  .btn:active { transform: translateY(1px); }
  .select { padding: 8px 10px; border-radius: 10px; border: 1px solid color-mix(in lch, var(--fg) 18%, transparent); background: transparent; }
  .toggle { display: inline-flex; gap: 6px; align-items: center; }
  .sr { position: absolute; left: -9999px; }
</style>
</head>
<body>
  <header>
    <h1>Emoji â†’ Character Prompt Builder</h1>
    <p>Click a group. UI shows emoji clusters; the generated prompt is a single, vivid, <strong>non-humanoid</strong> character built only from those animals/objects.</p>
  </header>

  <main>
    <section id="grid" class="grid" aria-label="Character groups"></section>
  </main>

  <section class="out" aria-live="polite" aria-atomic="true">
    <label for="variant" class="sr">Variant</label>
    <select id="variant" class="select">
      <option value="idle">Idle / portrait</option>
      <option value="action">Action / in environment</option>
      <option value="macro">Macro / material study</option>
    </select>
    <label class="toggle"><input id="negOn" type="checkbox" checked /> Append non-humanoid constraints</label>
    <div class="toolbar">
      <button id="copy" class="btn">Copy prompt</button>
      <button id="shuffle" class="btn">Shuffle group</button>
    </div>
    <textarea id="prompt" placeholder="Select a group above to generateâ€¦"></textarea>
  </section>

  <footer><small class="meta">Tip: Prompts avoid any human traits by designâ€”no clothing, no hands, no upright posture, no faces with human proportions.</small></footer>

<script>
(function init(){
  "use strict";

  /** ---------- Core state ---------- */
  const state = {
    groups: [
      {
        id: "forest-ember-fox",
        name: "Forest Ember-Fox",
        emojis: "ðŸ¦ŠðŸ‚ðŸŒ²",
        imagery:
`A small fox-shaped creature woven from curled copper leaves and pine needles; fur is layered foliage with ember-glow veins like lit coals at dusk; eyes are glossy seed-pods; tail is a rustling plume of maple blades; body plan is strictly fox-quadruped, low to the ground, leaf-pads for paws; faint ash dust trails when it trots.`,
        variants: {
          idle: "Calm, curled on a moss patch beneath conifers at golden hour; gentle leaf-rustle; soft particulate embers floating; shallow depth of field.",
          action: "Bounding between tree roots through a dim cedar forest, scattering sparks of leaf-embers; motion streaks from the tail; airborne needles around it.",
          macro: "Extreme close-up on the leaf-fur surface: serrated edges, vein lattices glowing, dew droplets refracting tiny pine silhouettes."
        }
      },
      {
        id: "ocean-post-dolphin",
        name: "Ocean Post-Dolphin",
        emojis: "ðŸ¬ðŸŒŠðŸ“«",
        imagery:
`A streamlined dolphin form sculpted from sea-glass and wave foam; dorsal fin carries a lacquered mailbox-shell fused organically into the spine; flanks show translucent aqua with trapped bubbles; eyes are smooth obsidian pebbles; body plan is pure dolphinâ€”no limbs beyond fins; foam trails arc along the body.`,
        variants: {
          idle: "Hovering just below the surface, mailbox-shell slightly ajar with drifting parchment; caustic light ripples across sea-glass skin.",
          action: "Leaping through a spray tunnel, depositing a ribboned message into a coral slot; droplets suspended mid-air like pearls.",
          macro: "Close crop on the sea-glass texture with micro-bubbles and edge frosting; tiny salt crystals glitter on the mailbox hinge."
        }
      },
      {
        id: "desert-compass-gecko",
        name: "Desert Compass-Gecko",
        emojis: "ðŸ¦ŽðŸœï¸ðŸ§­",
        imagery:
`A squat gecko built from sun-baked ceramic tiles; on its back, an inlaid brass compass rose is part of the scales; eyes are polished agate discs; belly is cracked clay; movement leaves faint compass-point imprints; strictly reptile stance on splayed toes, tail curled like a sundial gnomon.`,
        variants: {
          idle: "Resting on warm sandstone, heat shimmer above; a thin dust film on the brass inlay catches light.",
          action: "Skittering up a dune face, compass rose rotating minutely as grains cascade; wind-carved ripples blur behind.",
          macro: "Macro of the brass inlay meeting ceramic scales; oxidization greens in crevices; micro-cracks in clay belly."
        }
      },
      {
        id: "mountain-anvil-goat",
        name: "Mountain Anvil-Goat",
        emojis: "ðŸâ›°ï¸âš’ï¸",
        imagery:
`A sure-footed goat composed of basalt plates; horns are forged iron with hammer marks; a compact anvil forms the chest; hooves are spark-flecked steel; eyes are tiny furnace ports glowing low; anatomy is goat-accurate, quadrupedal and heavy, with soot at joints.`,
        variants: {
          idle: "Poised on a granite ledge in cold blue daylight; breath plumes; iron horns catch a rim light.",
          action: "Climbing a near-vertical scree with metallic clinks; a brief hoof strike sends a star of sparks.",
          macro: "Basalt plate interface with rivulet of rust from an iron rivet; crystalline inclusions glitter."
        }
      },
      {
        id: "city-recycler-raccoon",
        name: "City Recycler-Raccoon",
        emojis: "ðŸ¦ðŸ™ï¸â™»ï¸",
        imagery:
`A raccoon silhouette assembled from stacked cardboard, clear PET shards, and crushed aluminum; tail rings alternate corrugation and can; eyes are bottle-glass circles; a recycling glyph is cut through the flank layers; stance is crouched raccoonâ€”low, nimble, street-level.`,
        variants: {
          idle: "Under a sodium streetlamp beside neatly bundled paper; soft reflections on PET shards; distant skyline bokeh.",
          action: "Darting along an alley, collecting stray caps and tabs into a torso compartment; motion blur of tail rings.",
          macro: "Close on corrugation waves and can seam textures; tiny scuffs and print fragments visible."
        }
      },
      {
        id: "polar-wrench-penguin",
        name: "Polar Wrench-Penguin",
        emojis: "ðŸ§â„ï¸ðŸ”§",
        imagery:
`A penguin body carved from packed snow and matte onyx; a slender wrench is naturally integrated along the flank like a lateral bone; beak is dark volcanic glass; flippers edged with frost; gait is classic penguin waddle with compressed snow squeaks.`,
        variants: {
          idle: "Standing on blue ice beside a snow-buried tool cache; overcast diffuse light; faint spindrift.",
          action: "Sliding belly-first over ice, wrench-bone glinting; powder spray arches behind.",
          macro: "Macro of snow crystal lattices merging into smooth onyx surface; tiny rime along edges."
        }
      }
    ],
    idx: 0,
    variant: "idle",
    negOn: true
  };

  /** ---------- Constraints appended to keep it non-humanoid ---------- */
  const NON_HUMANOID =
    "Depict strictly as the described animal/object body plan. No humanoid anatomy, no upright biped stance, no clothing, no hands/fingers/thumbs, no human facial features, no logos or text.";

  /** ---------- Pure compute ---------- */
  function composePrompt(group, variantKey, negOn) {
    const variant = group.variants[variantKey] ?? group.variants.idle;
    const base =
`Character: ${group.name}
Emojis (UI only): ${group.emojis}

Imagery:
${group.imagery}

Scene note:
${variant}

Rendering notes: natural materials, coherent physical lighting, clean silhouette, high readability.`;
    return negOn ? `${base}\n\nConstraints: ${NON_HUMANOID}` : base;
  }

  /** ---------- Render ---------- */
  const $grid   = document.getElementById("grid");
  const $prompt = document.getElementById("prompt");
  const $variant= document.getElementById("variant");
  const $negOn  = document.getElementById("negOn");
  const $copy   = document.getElementById("copy");
  const $shuffle= document.getElementById("shuffle");

  function renderGrid() {
    // Minimal reflow; surgical diff for cards
    const frag = document.createDocumentFragment();
    state.groups.forEach((g, i) => {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "card";
      card.dataset.i = String(i);
      card.innerHTML = `
        <div class="emojis" aria-hidden="true">${g.emojis}</div>
        <div class="title">${g.name}</div>
        <div class="meta">${Object.keys(g.variants).length} variants</div>`;
      frag.appendChild(card);
    });
    $grid.replaceChildren(frag);
  }

  function updateOutput() {
    const g = state.groups[state.idx];
    const txt = composePrompt(g, state.variant, state.negOn);
    $prompt.value = txt;
  }

  /** ---------- Event delegation ---------- */
  document.addEventListener("click", (e) => {
    const t = e.target;
    if (!(t instanceof Element)) return;

    // Group card
    const btn = t.closest(".card");
    if (btn && btn.dataset.i) {
      const i = Math.max(0, Math.min(state.groups.length - 1, Number(btn.dataset.i)));
      state.idx = i;
      updateOutput();
      return;
    }

    // Copy
    if (t === $copy) {
      const didCopy = copyText($prompt.value);
      if (!didCopy) {
        $prompt.select();
        alert("Clipboard API unavailable here. Text selectedâ€”copy manually.");
      }
      return;
    }

    // Shuffle
    if (t === $shuffle) {
      state.idx = Math.floor(Math.random() * state.groups.length);
      updateOutput();
      return;
    }
  }, { passive: true });

  // Centralized change handlers
  document.addEventListener("change", (e) => {
    const t = e.target;
    if (t === $variant) {
      state.variant = $variant.value;
      updateOutput();
    }
    if (t === $negOn) {
      state.negOn = $negOn.checked;
      updateOutput();
    }
  });

  /** ---------- Clipboard (user gesture required) ---------- */
  function copyText(text) {
    try {
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text);
        return true;
      }
    } catch(_) {}
    return false;
  }

  // Initial render
  renderGrid();
})();
</script>
</body>
</html>